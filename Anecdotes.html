<!doctype html>
<html lang="fr">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Map interactive — fenêtres de contenu</title>
<style>
  :root{
    --ui-bg: rgba(0,0,0,0.6);
    --ui-color: #fff;
    --player-size: 50px;
    --marker-size: 0px;
  }
  html,body{height:100%;margin:0;font-family:system-ui,Segoe UI,Roboto,Arial;}
  #app{height:100vh;display:flex;flex-direction:column;}
  #hud{
    position:fixed; left:10px; top:10px; z-index:30;
    background:var(--ui-bg); color:var(--ui-color); padding:8px 12px;border-radius:8px;
    font-size:14px; box-shadow:0 4px 12px rgba(0,0,0,.4);
    user-select:none;
  }
  #hud b{display:inline-block; min-width:80px;}
  #viewport{
    position:relative; flex:1; overflow:hidden; background:#222;
  }
  #map{
    position:absolute; left:0; top:0;
    transform-origin:0 0;
  }
  #player{
    position:absolute;
    width:var(--player-size); height:var(--player-size);
    margin-left: calc(var(--player-size) / -2);
    margin-top: calc(var(--player-size) / -2);
    z-index:40;
    cursor:grab;
    transition: transform .03s linear;
  }
  #player:active{cursor:grabbing;}
  .marker{
    position:absolute;
    width:var(--marker-size); height:var(--marker-size);
    margin-left: calc(var(--marker-size) / -2);
    margin-top: calc(var(--marker-size) / -2);
    z-index:35;
    pointer-events:auto;
    user-select:none;
  }
  /* ==================== MODALE ==================== */
  #modal{
    display:none; position:fixed; inset:0; z-index:100; 
    background: rgba(0,0,0,.7);
    align-items:center; justify-content:center;
    padding:20px;
  }
  #modalContent{
    background:#fff; color:#000;
    max-width:600px; max-height:80vh;
    overflow-y:auto;
    border-radius:10px;
    padding:20px;
    box-shadow:0 10px 40px rgba(0,0,0,.5);
    text-align:center;
  }
  #modalContent img{
    max-width:100%;
    height:auto;
    border-radius:8px;
    margin-bottom:12px;
  }
  #closeBtn{
    background:#222; color:#fff;
    border:none;
    padding:8px 16px;
    border-radius:6px;
    cursor:pointer;
    margin-top:10px;
  }
  #tips{
    position:fixed; right:10px; top:10px; z-index:30;
    background:var(--ui-bg); color:var(--ui-color); padding:8px 12px;border-radius:8px;
    font-size:13px; max-width:220px;
  }
  @media (max-width:600px){
    #hud {font-size:12px}
    :root{--player-size:28px; --marker-size:28px;}
  }
</style>
</head>
<body>
<div id="app">
  <div id="hud">
    <div><b>Position</b> <span id="pos">x:0, y:0</span></div>
    <div style="margin-top:6px"><b>Map</b> <span id="mapName"></span></div>
    <div style="margin-top:6px"><b>Lieu</b> <span id="locLabel"></span></div>
  </div>

  <div id="viewport">
    <div id="map">
      <img id="player" src="data:image/svg+xml;utf8,
        <svg xmlns='http://www.w3.org/2000/svg' width='64' height='64' viewBox='0 0 24 24' fill='none' stroke='%23ffcc00' stroke-width='1.5' stroke-linecap='round' stroke-linejoin='round'><circle cx='12' cy='10' r='3.2' /><path d='M12 2v3M12 21v-3M20 12h-3M7 12H4M17.5 6.5L15.5 8.5M8.5 15.5L6.5 17.5M17.5 17.5L15.5 15.5M8.5 8.5L6.5 6.5' /></svg>" alt="player" draggable="false">
    </div>
  </div>

  <!-- Fenêtre modale -->
  <div id="modal">
    <div id="modalContent">
      <img id="modalImg" src="" alt="">
      <div id="modalText"></div>
      <button id="closeBtn" onclick="hideModal()">Fermer</button>
    </div>
  </div>
</div>

<script>
/* ==========================
   CONFIGURATION
   ========================== */
const MAPS = {
  "ville-centre": {
    id: "ville-centre",
    name: "Ville - Centre",
    bg: "Biblio/Noir.png",
    width: 1000,
    height: 800
  }
};

// Map de départ
let CURRENT_MAP_ID = "ville-centre";

/* Exemple : chaque lieu peut maintenant avoir :
   - type: 'info' → ouvrira une fenêtre dans la page
   - img: image à afficher
   - text: texte avec \n ou \n\n
*/
let LOCATIONS = [
    { x: 200, y: 150, img: "Anecdotes/Fragments d'un discours amoureux.jpeg", type: "info", 
    label:"Barthes",
    contentImg:"Barthes",
    contentText:"L’autre est en état de perpétuel départ, de voyage ; il est, par vocation, migrateur, fuyant ; je suis, moi qui aime, par vocation inverse, sédentaire, immobile, à disposition, en attente, tassé sur place, en souffrance, comme un paquet dans un coin perdu de gare. \n \n Je tiens sans fin à l’absent le discours de son absence ; situation en somme inouïe ; l’autre est absent comme référent, présent comme allocutaire. De cette distorsion singulière, naît une sorte de présent insoutenable ; je suis coincé entre deux temps, le temps de la référence et le temps de l’allocution : tu es parti (de quoi je me plains), tu es là (puisque je m’adresse à toi). Je sais alors ce qu’est le présent, ce temps difficile : un pur morceau d’angoisse\n \n Je m’installe seul, dans un café ; on vient m’y saluer ; je me sens entouré, demandé, flatté. Mais l’autre est absent ; je le convoque en moi même pour qu’il me retienne au bord de cette complaisance mondaine, qui me guette. J’en appelle à sa « vérité » (la vérité dont il me donne la sensation) contre l’hystérie de séduction où je me sens glisser. Je rends l’absence de l’autre responsable de ma mondanité : j’invoque sa protection, son retour : que l’autre apparaisse, qu’il me retire.",
    },
    { x: 300, y: 150, img: "Anecdotes/René Girard.jpeg", type: "info", 
    label:"Loin de moi",
    contentImg:"Loin de moi",
    contentText:"René Girard signale un cas particulier de cette identité par procuration, qu’il classe comme variante de ce qu’il appelle la « médiation réciproque » et concerne la coquetterie. On peut résumer ainsi la formule de ce cas : A s’aime en imitant B qui l’aime ; et B à son tour aime A, en imitant A qui s’aime lui-même. \n \n La coquette est  entièrement tributaire de l’autre ; mais l’amant aussi. De tels cas sont  fréquents dans la vie et dans la littérature, par exemple chez Molière et  Marivaux. Le conflit propre à la coquetterie, où A se dérobe afin de perpétuer le sentiment illusoire qu’a B de l’identité autonome de A est ainsi moins un conflit de personnes qu’une trop grande entente, moins l’effet d’une incompatibilité d’humeur que celui d’une trop parfaite identité d’humeur, – contrairement à ce qu’en laisserait croire une observation superficielle. \n \n René Girard analyse très bien la source imitative, et non conflictuelle, de ce conflit : « Le “désespoir” de l’amant et la coquetterie de l’aimée grandissent de concert car les deux sentiments sont copiés l’un sur l’autre. C’est un même désir, toujours plus intense, qui circule entre les deux partenaires. \n \n Si les amants ne sont jamais d’accord, ce n’est pas parce qu’ils sont trop “différents” comme l’affirment le sens commun et les romans sentimentaux, c’est parce qu’ils sont trop semblables l’un à l’autre, c’est parce qu’ils sont tous des copies les uns des autres. » \n \n En bref, et contrairement à ce que prétend un proverbe bien connu, ce qui se ressemble ne s’assemble pas, ceux qui s’entendent sur toute chose n’ont pas vocation à s’entendre entre eux.",
    },
    { x: 400, y: 150, img: "Anecdotes/61RtKbuzV9L._AC_UF1000,1000_QL80_.jpg", type: "info", 
    label:"Ponérologie Politique",
    contentImg:"Ponérologie Politique",
    contentText:"Lorsqu’un conflit survient, nous supposons automatiquement que dans tout conflit une des parties a raison au  moins en partie, que l’autre partie a elle aussi raison en partie, et qu’il est possible de reconnaître quelle partie a le plus raison ou le plus tort. Du fait de notre soumission à des facteurs d’'arguments légaux’, quand une dispute s’élève nous pensons automatiquement que la vérité se trouve quelque part entre les deux extrêmes.  L’hypothèse que la vérité se trouve entre les témoignages des deux parties fait toujours glisser l’avantage vers la partie qui ment, et non vers celle qui dit la vérité.\n \n Conférence donnée par un pseudo prof (propagande) . 6% transpersonification.\n \n Le livre met en avant l'idée que certaines personnalités ayant des traits psychopathiques ou antisociaux accèdent souvent au pouvoir. Ces individus sont dépourvus d'empathie, mais dotés d'une capacité à manipuler les autres, ce qui leur permet de gravir les échelons politiques ou sociaux.\n \n Phase de stabilité : La société est dirigée par des individus normaux, empathiques et compétents, avec des institutions fonctionnelles.\n Phase d’infiltration : Les personnalités pathologiques (psychopathes, sociopathes) s’infiltrent dans les sphères de pouvoir en manipulant et exploitant les failles sociales ou les crises.\n Établissement de la pathocratie : Les individus pathologiques prennent le contrôle total des institutions. Ils imposent la répression, la propagande et des valeurs déshumanisantes.\n Effondrement : Sous l'effet de la mauvaise gestion des pathocrates et des résistances (interne ou externe), le système s’effondre.\n Reconstruction : Les individus sains tentent de rétablir des institutions fonctionnelles et de réparer les traumatismes causés par le régime pathologique.\n \n Schizoïde - Simplifie la réalité quitte à la perdre\n Ces individus sont parfois les premiers à introduire des idées déconnectées des réalités humaines et sociales, mais qui semblent intellectuellement séduisantes.\n \n Paranoïdes - Vont l'imposer\n Les paranoïaques jouent un rôle crucial dans l’étape d’infiltration et de consolidation d’un régime pathologique. Leur méfiance et leur agressivité les poussent à créer des climats de peur et de division.\n \n Psycho - Vont s'en ressaisir\n Ils reprennent le pouvoir en chassant les paranoïdes.\n \n Que faire contre le mal ? Comprendre et attendre.",
    },
    { x: 500, y: 150, img: "Anecdotes/Masks.jpeg", type: "info", 
    label:"Ripley",
    contentImg:"Ripley",
    contentText:"Cet homme devait avoir une quarantaine d’années lors de notre rencontre. Il était arrivé depuis plus de six mois au Café social lorsque nous échangeâmes quelques mots pour la première fois, après qu’il m’ait spontanément interpellé par un : « Hé ! Paraît que c’est toi le nouveau ! » Il émanait de lui une forme d’entrain, une aisance relationnelle, que sa posture physique et sa musculature confortaient. L’impression générale qui se dégageait de ce premier échange était qu’une grande assurance l’habitait.\n \n Monsieur Ripley semblait animé par un besoin profond : de nature relationnelle. Mais le mode de lien qu’il engageait avec les gens avait un caractère remarquable. \n \n  Il se voulait par exemple expert en économie et commercial de talent et déclara un moment exercer un emploi de vendeur de téléphonie mobile (le téléphone portable faisait à cette époque son apparition) où il expliquait gagner des fortunes ; avant d’annoncer, quelque temps plus tard, avoir démissionné de ce poste pour pouvoir faire « de meilleures affaires ». \n \n Pour démontrer ses talents de financier, il m’avait, un jour, donné un cours sur la bourse, dont la complexité et la longueur n’eurent d’égal que mon scepticisme à l’égard de la logique de ses théories. \n \n Ainsi, Monsieur Ripley, se mesurant constamment à ses compagnons dont il faisait des êtres faibles en comparaison de lui, apparaissait-il avide d’un certain rapport de force, comme s’il fallait qu’il soit le « grand » et les autres des « petits ». Or, cette posture dans laquelle il tentait de placer tout un chacun suscitait beaucoup de méfiance. \n \n En fait, Monsieur Ripley, adulé à son arrivée dans le lieu six mois plus tôt, avait, depuis que les gens s’étaient habitués à lui, perdu leur confiance. Tout le monde, des professionnels aux usagers, s’accordait à dire qu’il était « mythomane ». Ce qualificatif révélait le degré d’agressivité qu’avait suscité cette façon particulière de chercher à « être aimé ». Son attitude lui était devenue nuisible au point d’en faire le repoussoir du groupe.\n \n À présent, les gens semblaient devenus phobiques à l’égard de Monsieur Ripley, sa tendance au mensonge lui ayant valu de devenir l’objet d’un rejet manifeste. Elle révélait à la fois l’existence de sa soif narcissique et celle d’un lien psychiquement coûteux pour les gens qui l’entouraient. Ces derniers ressentaient le sentiment d’être utilisés pour étancher son besoin de reconnaissance. À travers ses mensonges, c’est en effet une étrange manière d’assouvir son avidité relationnelle qui semblait transparaître. \n \n Le mensonge qui va être décrit commence lorsque Monsieur Ripley vint me solliciter pour une demande spéciale : il lui fallait des feuilles à petits carreaux grand format. Sa manière surprenante et directe de m’interpeller laissait à penser qu’il nourrissait un dessein de la plus grande importance. Il fallait, dit-il avec empressement, qu’il dessine des plans. Ces paroles une fois prononcées, il me fixa intensément, comme s’il attendait une question de ma part. L’œil scrutateur avec lequel il observait ma réaction signait son attente que je le questionne sur le motif de sa requête. Posté face à cette énigmatique demande, je l’interrogeais sur ce fameux plan à propos duquel il était venu me solliciter. « Tu dois dessiner des plans ? » demandais-je, sans doute un peu interloqué. « Oui, répondit-il spontanément, car je dois faire le plan d’une éolienne à géométrie variable…  Tu dois savoir ce que c’est qu’une éolienne ? » Là-dessus, il enchaîna des explications, nourries par une quantité impressionnante de détails techniques concernant les divers usages d’une éolienne. \n \n Durant ce « cours », prononcé d’un air magistral, son regard restait cramponné au mien, guettant avidement la moindre de mes réactions. Et ce jusqu’à la conclusion : « L’éolienne que je vais mettre au point est différente… » Le silence qui suivit paraissait être savouré par Monsieur Ripley, qui semblait désireux de m’intriguer avec le caractère exceptionnel de cet appareil. Il poursuivit son descriptif technique : « Une éolienne normale produit 40 % d’électricité… », puis laissa s’amorcer un moment de suspense avant d’enchaîner : « …40 % par rapport à une centrale nucléaire ». Puis, il augmenta le débit des informations délivrées, me faisant définitivement perdre le fil de son discours. Assis en face de lui, je ne recevais plus ses paroles, qui semblaient à présent glisser sur mon écoute et ne résonnaient plus autrement que comme une sorte de flot d’onomatopées vide de tout sens. \n \n Ne saisissant plus le débit continu d’explications dont il semblait m’assaillir, j’avais effectivement la sensation d’être réduit à néant. Aussi, comme pour lutter contre le sentiment d’être noyé par cette logorrhée, je m’accrochais à une phrase, perdue dans un amas de bruits : « Tu sais, un champ d’éoliennes entier produit 40 % d’électricité de moins qu’une centrale nucléaire. Alors que l’éolienne à géométrie variable que j’ai conçue en produit autant. » « Mais c’est quoi le principe de géométrie variable ? » lui demandais-je. \n \n « Tu sais, je ne veux pas commercialiser mon invention, je veux juste faire les plans pour qu’elle puisse être construite. J’ai des amis qui ont monté une association en Afrique. Tu sais, là-bas, produire de l’électricité et extraire de l’eau sera bien utile. D’autant plus qu’avec mon système, extraire de l’eau à dix mètres ne coûtera que cinquante francs… Tu sais que j’étais plombier avant (il avait évoqué beaucoup de professions différentes), eh bien je me sers simplement d’un siphon comme celui-ci (il indiqua d’un geste le lavabo en face de lui) ».  \n \n Quelque chose s’était produit qui, au début, nous avait liés et semblait à présent nous séparer.\n \n Les membres de l’équipe avaient également signalé assez tôt la suspicion que provoquait cet homme. Il était conseillé de s’en « méfier », et ne « pas trop l’écouter ». Les membres de l’équipe se plaignaient du fait qu’ils ne supportaient plus « l’impression d’être pris pour des imbéciles ».\n \n  L’ostracisme impalpable que Monsieur Ripley pouvait ressentir autour de lui devait probablement être la source d’un grand malaise. \n \n Cette rupture signe à la fois l’échec de ces personnes à faire entendre leur souffrance et celui de notre capacité à les contenir, comme si leur parcours ne pouvait être qu’un continuel recommencement, comme si le problème intérieur qui les poussait à mentir les obligeait continuellement à prendre le chemin de l’errance pour rencontrer de nouvelles personnes dans de nouveaux lieux, jusqu’à ce que leur crédibilité soit à nouveau mise à mal. \n \n On peut considérer que « le projet d’éolienne » dont fit part Monsieur Ripley contenait des éléments significatifs de sa solitude et de son besoin d’être réparé. En parlant d’aider l’Afrique (un continent qui souffre) avec son éolienne, Monsieur Ripley pourrait avoir inconsciemment exprimé son attente que quelqu’un vienne le secourir. Dans cette optique, sa souffrance et ses espoirs se seraient dévoilés dans les linéaments fantasmatiques de sa parole. \n \n Par-delà le dire, le sujet ferait partager ses affects avec ceux qu’il trompe. Les éprouvés dérangeants que ferait naître la situation dite de méprise auraient un caractère significatif. En trompant ses interlocuteurs, le sujet se « raconterait » à l’endroit où sa parole échoue à remplir cet office. Autrement dit, la manière dont l’individu manipule l’environnement signifierait la présence du problème qu’il tente de résoudre. \n \n Sans doute notre sentiment d’impuissance consécutif à la situation de méprise que Monsieur Ripley s’efforçait de créer était-il similaire à celui qu’il ressentait au fond de lui. Cette défense qui consiste à tromper l’autre indique en cela la vulnérabilité que le sujet cache. \n \n L’agressivité dont nous faisions état à l’égard de Monsieur Ripley aurait fait écho à sa souffrance.",
    },
    { x: 600, y: 150, img: "Anecdotes/Настольные игры.jpeg", type: "info", 
    label:"Bandit à Bras Multiples",
    contentImg:"Bandit à Bras Multiples",
    contentText:"L’expérience de John C. Wright illustre la difficulté de modifier une croyance une fois qu’elle est ancrée. Il met en place une machine avec des boutons où les sujets doivent maximiser leur score, mais les récompenses sont attribuées de manière totalement arbitraire. Malgré cela, les participants développent des théories illusoires sur la bonne méthode à suivre. Même après qu’on leur révèle l’arbitraire du système, beaucoup refusent d’y croire. L’expérience démontre ainsi un biais cognitif universel : lorsqu’une solution a été trouvée au prix d’un effort significatif, il est plus facile de tordre la réalité pour la justifier que de l’abandonner.\n \n L’expérience de Wright est structurée en plusieurs phases qui mettent en lumière la manière dont les croyances se forment et résistent au changement :  \n \n 1.   Phase initiale (groupes 1 à 10, soit 250 essais) :    \n    - Les sujets reçoivent des récompenses de manière aléatoire mais avec un certain taux de succès (par exemple, 50 %).  \n    - Ils tentent alors d’identifier des schémas, développant des théories plus ou moins complexes sur la bonne façon de presser les boutons.  \n    - L’incertitude et l’apprentissage progressif favorisent la formation de croyances erronées sur le fonctionnement de la machine.  \n \n 2.   Phase de rupture (groupes 11 et 12, soit 50 essais) :    \n    - Subitement, aucune action ne produit de récompense.  \n    - Cette phase provoque de la frustration et pousse certains sujets à abandonner.  \n    - Ceux qui persistent remettent en question leurs stratégies et tentent d’en élaborer de nouvelles.  \n \n 3.   Phase de renforcement trompeur (groupe 13, soit 25 essais) :    \n    - Soudainement, chaque tentative est récompensée.  \n    - Les sujets croient alors avoir enfin trouvé la bonne méthode et renforcent leur illusion d’un système logique sous-jacent.  \n    - Lorsque la véritable nature arbitraire de la machine est révélée, beaucoup refusent de l’admettre, préférant croire qu’ils ont réellement découvert un schéma rationnel.  \n \n Ces différentes vagues montrent comment les êtres humains s’attachent à des explications qu’ils ont construites, même face à des preuves contraires. Plus l’effort pour parvenir à une conclusion est grand, plus il est difficile d’accepter que celle-ci repose sur une illusion.",
    },
    { x: 200, y: 300, img: "Anecdotes/Théo.jpeg", type: "info", 
    label:"Kaczynski",
    contentImg:"Kaczynski",
    contentText:"L’empereur Hirohito, par exemple, au lieu de se réfugier dans un hédonisme décadent, s’est intéressé à la biologie marine, domaine où il se distingua. Quand les gens peuvent satisfaire sans efforts leurs besoins physiques, ils s’inventent souvent des objectifs artificiels, auxquels ils consacrent la même énergie, avec le même investissement émotionnel que s’il s’agissait d’assurer leur survie. Les aristocrates de l’Empire romain avaient ainsi des ambitions littéraires ; de nombreux aristocrates ont consacré beaucoup de temps et d’énergie à chasser, alors qu’ils ne manquaient certainement pas de\n nourriture ; d’autres rivalisaient dans l’étalage de leurs richesses ; et\n quelques-uns, comme Hirohito, se sont tournés vers la science.\n \n Nous divisons les aspirations humaines en trois catégories : \n 1) celles qui peuvent être satisfaites à l’aide d’un effort minime ; \n 2) celles qui peuvent être satisfaites, mais au prix d’efforts sérieux ; \n 3) celles qui sont impossibles à satisfaire, quels que soient les efforts fournis.\n \n L’auto-accomplissement est le processus qui consiste à satisfaire les aspirations de la deuxième catégorie. Quant à celles de la troisième, plus elles sont nombreuses, plus sont fréquents la frustration, la colère, le défaitisme, la dépression, etc.\n \n Dans la société industrielle moderne, la satisfaction des besoins\n matériels ne requiert qu’un minimum d’efforts. Il suffit de suivre une\n formation qui dispense un petit savoir-faire technique, puis d’arriver à\n l’heure au travail et de déployer le peu d’effort nécessaire pour\n conserver ce travail. \n \n Les gens éprouvent de nombreux désirs passagers ou des impulsions qui sont automatiquement frustrés dans la vie moderne, et qui font donc partie de la troisième catégorie. On peut se mettre en colère, mais la société n’autorise pas la bagarre. Dans beaucoup de situations, elle ne permet même pas les agressions verbales. On peut être pressé de se rendre quelque part ou avoir envie de flâner, mais il n’y a pas d’autre choix que de suivre le flot des voitures et de respecter les signalisations. On peut vouloir faire son travail d’une manière différente, mais on ne peut en général travailler qu’à condition de se plier aux exigences de son employeur. \n \n Les êtres humains ont le besoin, sans doute biologique, de quelque chose que nous appellerons le «processus d’auto-accomplissement ». Ce processus d’auto-accomplissement comporte quatre composantes. Nous nommerons but, effort et réalisation les trois composantes les plus aisément identifiables  tout le monde a besoin de buts qui exigent des efforts pour être atteints, et de réussir à en atteindre au moins quelque uns. La quatrième composante est plus délicate à définir et n’est peut-être pas indispensable à tout le monde ; il s’agit de l’autonomie.\n \n - Theodore Kaczynski, La société industrielle et son avenir",
    },
      { x: 300, y: 300, img: "Anecdotes/strulevitch_article.jpg", type: "info", 
    label:"Le Grand Jeu",
    contentImg:"Le Grand Jeu",
    contentText:"Synthèse métaphysique inde bouddhisme & poète maudis\n \n Reims \n \n Réné Daumal \n Roger Gilbert Lecompte\n Roger Vailland\n Robert Meyrat\n \n Ils se rencontrent à 14 15 ans au lycée à Reims, bons élèves très érudits mais dissipés, veulent tester des trucs, détestent l'autorité. Testent des drogues, veulent se retrouver dans les rêves. Ils font des experiences de mort imminente. \n \n Le grand jeu sera fondé par Daumal, Lecompte et Vailland, et autres. Ils fondent le grand jeu. Le but est de rencontrer la vérité, comprendre le monde, l'art, \n \n Lecompte se drogue, se retire du monde, la vie est une dégradation, l'avant naitre est le supérieur. \n \n Daumal veut vivre dans ce monde. Il refuse la dégradation, les addictions.\n \n numero  1 :\n \n L’abandon des cadres moraux et sociaux. La nécessité d’une « éthique nouvelle » fondée sur une révolution intérieure.\n \n  « Table rase : tout est vrai, – il n’y a plus rien. »​. La révolte radicale ne consiste pas seulement à s’opposer à l’ordre établi, mais à déconstruire toute illusion, y compris celles créées par l’esprit humain. \n \n Ils prônent une liberté absolue, déconnectée de tout but. L’idée de liberté, selon René Daumal, repose sur une négation absolue des motivations extérieures et intérieures. L’homme libre, tel qu’il le conçoit, refuse d’agir sous l’influence du désir, de la raison ou d’un but précis. Il atteint une conscience supérieure.\n \n Cette quête de la liberté absolue conduit paradoxalement à une dissolution de l’esprit de révolte. Dès qu’un individu découvre une nouvelle voie intérieure, il se détache du monde, le trouvant indifférent et dépourvu de sens. Il réalise également que toute opposition à une loi reste une manière d’y être assujetti : agir systématiquement contre un désir, c’est encore lui obéir\n \n La liberté sans espoir décrite par Daumal est donc une forme extrême de détachement, où l’individu, ayant refusé toute contrainte, découvre une solitude absolue qui le prive de toute impulsion à agir. Cette liberté n’est pas une exaltation, mais un vide : un rire désespéré face à l’absurde de l’existence, où même la révolte perd son sens.\n \n numero 2 :\n \n L’éveil brutal à l’existence : N’importe qui peut éprouver à un moment ou l’autre la stupeur d’être​. Il décrit comment une prise de conscience soudaine de son existence peut bouleverser un individu et le mener à une crise existentielle. Il prône l’acceptation du vide et de l’absurde comme seul chemin vers une transformation intérieure.\n \n L’être humain est un enchaînement de cercles vicieux : il décrit l’homme comme une série de contradictions, incapable d’accéder à une vérité pure​.\n \n numero 3 : \n \n Le Grand Jeu voit l’Occident comme une civilisation condamnée, où la pensée s’est enfermée dans le rationalisme et l’individualisme.\n Il critique la pensée cartésienne et positiviste, qui a réduit le mythe à un simple conte. Il montre que des traditions ésotériques comme celles de Pythagore, Platon et les gnostiques avaient compris que le mythe est une porte vers l’absolu.\n \n Il rejoint ici l’idée que la raison est une prison, et que l’expérience mystique peut passer par une rupture totale avec le réel ordinaire.\n \n Il insiste sur le fait que l’homme vit dans un monde structuré par le langage, mais que ce langage est lui-même un jeu de reflets trompeurs. Il compare l’acte de parler à une tentative de nommer l’invisible, de saisir l’insaisissable. Mais chaque mot prononcé ne fait que repousser un peu plus loin l’objet réel du discours. Ce constat rapproche sa vision de celle des mystiques ou des penseurs existentialistes : nous sommes condamnés à parler, mais jamais à atteindre l’essence de ce que nous cherchons à dire.\n",
      },
      { x: 400, y: 300, img: "Anecdotes/télécharger (69).jpeg", type: "info", 
    label:"Capgras",
    contentImg:"Capgras",
    contentText:"Le Syndrome de Capgras : Une illusion d’imposture\n \n Le syndrome de Capgras est un trouble psychiatrique rare mais fascinant, dans lequel un individu est convaincu qu’un proche (conjoint, parent, ami) a été remplacé par un imposteur identique en apparence. Par exemple, un patient peut croire que sa mère est une copie parfaite de la vraie, mais qu’elle n’est plus elle-même.\n \n Origine et Explication Neuropsychologique\n Le syndrome de Capgras est lié à une déconnexion entre la reconnaissance faciale et les émotions associées. Normalement, lorsque nous voyons une personne familière, notre cerveau active deux systèmes :\n \n Reconnaissance perceptive (le je reconnais ce visage)\n \n Réaction émotionnelle (le je ressens quelque chose en voyant ce visage).\n Chez les patients atteints du syndrome de Capgras, le premier système fonctionne, mais le second est défaillant. Cela signifie que le patient reconnaît bien le visage, mais n’éprouve aucune émotion associée. Le cerveau tente alors de donner un sens à cette incohérence et produit une explication délirante : Ce n’est pas la vraie personne, c’est un imposteur !\n \n Le syndrome de Capgras soulève des questions philosophiques profondes sur l’identité et la reconnaissance.\n \n Notre perception des autres repose-t-elle plus sur ce que nous voyons ou ce que nous ressentons ?\n \n Le syndrome de Frégoli est un trouble délirant rare dans lequel une personne est persuadée qu’un même individu prend l’apparence de différentes personnes pour l’espionner, la persécuter ou l’influencer. Contrairement au syndrome de Capgras (où un proche est perçu comme un imposteur), ici, le patient voit des inconnus comme étant, en réalité, une seule et même personne déguisée ou métamorphosée.\n \n Le syndrome de Frégoli est lié à une hyper-association entre les visages et les souvenirs. Il pourrait découler d’une dysfonction des régions du cerveau impliquées dans la reconnaissance faciale et l’attribution des émotions",
      },
      { x: 500, y: 300, img: "Anecdotes/117) SCUM Manifesto by Valerie Solanas.jpeg", type: "info", 
    label:"Scum Manifesto",
    contentImg:"Scum Manifesto",
    contentText:"Nous savons que le « Grand Art » est grand parce que les hommes, des « spécialistes », nous l’ont dit, et nous ne pouvons pas dire le contraire vu que seules des sensibilités exquises bien supérieures à la nôtre sont à même de percevoir et d’apprécier ce qui est grand, la preuve de leur sensibilité supérieure étant qu’ils apprécient les saloperies. \n \n  « Apprécier », c’est tout ce que sait faire l’homme « cultivé ». Passif, nul, dépourvu d’imagination et d’humour, il faut bien qu’il se débrouille avec ça. Incapable de se créer ses propres distractions, de se créer un monde à lui, d’agir d’une façon ou d’une autre sur son environnement, il doit se contenter de ce qu’on lui offre. Il ne sait pas créer, il ne sait pas communiquer : il est spectateur. En se gobergeant de culture, il cherche désespérément à prendre son pied dans un monde qui n’a rien de jouissif ; il cherche à fuir l’horreur d’une existence stérile d’où l’esprit est absent. La « culture » c’est le baba du pauvre, le croûton spirituel des tarés, une façon de justifier le spectateur dans son rôle passif. Elle permet aux hommes de se glorifier de leur faculté d’apprécier « les belles choses », de voir un bijou à la place d’une chiure. Ce qu’ils veulent, c’est qu’on admire leur admiration.\n \n  Il s'accroche alors à n'importe quelle femme dans le vague espoir de remplir son vide intérieur, et se nourrissant de l'illusion mystique qu'à force de toucher de l'or il se transformera lui-même en or.\n Valérie Solanas",
    },
    { x: 600, y: 300, img: "Anecdotes/Emil Cioran, Précis de décomposition  _ Book (1949).jpeg", type: "info", 
    label:"Précis de Décomposition",
    contentImg:"Précis de Décomposition",
    contentText:"Toute expérience capitale est néfaste : les couches de l’existence manquent d’épaisseur ; celui qui les fouille, archéologue du cœur et de l’être, se trouve, au bout de ses recherches, devant des profondeurs vides. Il regrettera en vain la parure des apparences. C’est ainsi que les Mystères antiques, révélations prétendues des secrets ultimes, ne nous ont rien légué en fait de connaissance. Les initiés sans doute étaient tenus de n’en rien transmettre ; il est cependant inconcevable que dans le nombre il ne se soit trouvé un seul bavard ; quoi de plus contraire à la nature humaine qu’une telle obstination dans le secret ? C’est que des secrets, il n’y en avait point ; il y avait des rites et des frissons. Les voiles écartés, que pouvaient-ils découvrir sinon des abîmes sans conséquence ? Il n’y a d’initiation qu’au néant – et au ridicule d’être vivant.\n \n -\n \n C’est l’impossibilité de pleurer qui entretient en nous le goût des choses, et les fait exister encore : elle nous empêche d’en épuiser la saveur et de nous en détourner. Quand, sur tant de routes et de rivages, nos yeux refusaient de se noyer en eux-mêmes, ils préservaient par leur sécheresse l’objet qui les émerveillait. Nos larmes gaspillent la nature, comme nos transes, Dieu… Mais à la fin, elles nous gaspillent nous-mêmes. Car nous ne sommes que par le refus de donner libre cours à nos désirs suprêmes : les choses qui entrent dans la sphère de notre admiration ou de notre tristessen’y demeurent que parce que nous ne les avons ni sacrifiées ni bénies de nos adieux liquides. … Et c’est ainsi qu’après chaque nuit, nous retrouvant en face d’un jour nouveau, l’irréalisable nécessité de le combler nous transporte d’effroi ; et, dépaysés dans la lumière, comme si le monde venait de s’ébranler, d’inventer son Astre, nous fuyons les larmes – dont une seule suffirait à nous évincer du temps.\n \n -\n \n Dans tout homme sommeille un prophète, et quand il s’éveille il y a un peu plus de mal dans le monde… La folie de prêcher est si ancrée en nous qu’elle émerge de profondeurs inconnues à l’instinct de conservation. Chacun attend son moment pour proposer quelque chose : n’importe quoi. Il a une voix : cela suffit. Nous payons cher de n’être ni sourds ni muets… Des boueux aux snobs, tous dépensent leur générosité criminelle, tous distribuent des recettes de bonheur, tous veulent diriger les pas de tous : la vie en commun en devient intolérable, et la vie avec soi-même plus intolérable encore : lorsqu’on n’intervient point dans les affaires des autres, on est si inquiet des siennes que l’on convertit son « moi » en religion, ou, apôtre à rebours, on le nie : nous sommes victimes du jeu universel…",
   }
];

const PLAYER_SPEED = 600;
const CLICK_RADIUS = 50;
const DETECTION_RADIUS = 60;

/* ========================== */
let state = {
  mapObj: null,
  player: { x: 100, y: 100 },
  keys: {},
  lastTs: null,
  dragging: false
};

/* DOM elements */
const viewport = document.getElementById('viewport');
const mapEl = document.getElementById('map');
const playerEl = document.getElementById('player');
const posEl = document.getElementById('pos');
const mapNameEl = document.getElementById('mapName');
const locLabelEl = document.getElementById('locLabel');
const modal = document.getElementById('modal');
const modalImg = document.getElementById('modalImg');
const modalText = document.getElementById('modalText');

/* Charger une map */
function loadMap(mapIdOrObj){
  const mapObj = (typeof mapIdOrObj === 'string') ? MAPS[mapIdOrObj] : mapIdOrObj;
  if(!mapObj){ console.error("Map introuvable :", mapIdOrObj); return; }

  state.mapObj = mapObj;
  mapEl.style.width = mapObj.width + "px";
  mapEl.style.height = mapObj.height + "px";
  mapEl.style.backgroundImage = `url("${mapObj.bg}")`;
  mapEl.style.backgroundSize = "cover";
  mapEl.style.backgroundPosition = "center center"; // <-- ajout important

  mapNameEl.textContent = mapObj.name || mapObj.id || "";

  // Attendre que l’image soit bien chargée avant de centrer
  const img = new Image();
  img.onload = () => {
    renderMarkers();
    clampPlayer();
    centerOnPlayer();
  };
  img.src = mapObj.bg;
}

/* Initialisation */
function init(){
  loadMap(CURRENT_MAP_ID);
  // Placer le joueur au centre logique de la map
  state.player.x = MAPS[CURRENT_MAP_ID].width / 2;
  state.player.y = MAPS[CURRENT_MAP_ID].height / 2;

  // Centrage après rendu complet
  window.addEventListener("load", () => {
    centerOnPlayer();
    updateHUD();
    requestAnimationFrame(loop);
  });
}

/* Rendu des marqueurs */
function renderMarkers(){
  mapEl.querySelectorAll('.marker').forEach(n => n.remove());
  LOCATIONS.forEach((loc, idx) => {
    const i = document.createElement('img');
    i.src = loc.img;
    i.className = 'marker';
    i.style.left = loc.x + 'px';
    i.style.top = loc.y + 'px';
    // Appliquer une taille personnalisée si définie dans l'objet LOCATIONS
if (loc.size) {
  i.style.width = loc.size + "px";
  i.style.height = "auto";
} else {
  i.style.width = "50px";
  i.style.height = "auto";
}
i.style.objectFit = "contain"; // évite les déformations

    i.alt = loc.label || ("loc"+idx);
    i.dataset.idx = idx;
    i.addEventListener('click', (ev) => {
      ev.stopPropagation();
      handleLocationClick(loc);
    });
    i.addEventListener('mouseenter', () => locLabelEl.textContent = loc.label);
    i.addEventListener('mouseleave', () => locLabelEl.textContent = "");
    mapEl.appendChild(i);
  });
}

/* Action selon le type */
function handleLocationClick(loc){
  if(!loc) return;
  switch(loc.type){
    case 'info':
      showModal(loc.contentImg, loc.contentText);
      break;
    case 'map':
      if(MAPS[loc.link]) loadMap(loc.link);
      else if (loc.link.endsWith('.html')) window.location.href = loc.link;
      break;
    default:
      console.warn("Type non géré:", loc.type);
  }
}

/* Affichage du modal */
function showModal(imgSrc, text){
  modal.style.display = 'flex';
  modalImg.src = imgSrc || '';
  modalText.innerHTML = formatText(text || '');
}

/* Masquer le modal */
function hideModal(){
  modal.style.display = 'none';
  modalImg.src = '';
  modalText.textContent = '';
}

/* Formater le texte : \n = <br>, \n\n = <br><br> */
function formatText(str){
  return str
    .replace(/\n\s*\n/g, '<br><br>')
    .replace(/\\n/g, '<br>');
}

/* Centrage sur le joueur */
function centerOnPlayer(){
  const vpW = viewport.clientWidth;
  const vpH = viewport.clientHeight;
  const mapW = mapEl.clientWidth;
  const mapH = mapEl.clientHeight;
  let offsetX = vpW/2 - state.player.x;
  let offsetY = vpH/2 - state.player.y;
  offsetX = Math.min(0, Math.max(vpW - mapW, offsetX));
  offsetY = Math.min(0, Math.max(vpH - mapH, offsetY));
  mapEl.style.transform = `translate(${offsetX}px, ${offsetY}px)`;
  playerEl.style.left = state.player.x + 'px';
  playerEl.style.top = state.player.y + 'px';
}

/* Limiter les coordonnées */
function clampPlayer(){
  if(!state.mapObj) return;
  state.player.x = Math.max(0, Math.min(state.mapObj.width, state.player.x));
  state.player.y = Math.max(0, Math.min(state.mapObj.height, state.player.y));
}

/* Déplacement clavier */
window.addEventListener('keydown', (e)=> state.keys[e.key.toLowerCase()] = true);
window.addEventListener('keyup', (e)=> state.keys[e.key.toLowerCase()] = false);

/* Drag */
let dragOffset = {x:0,y:0};
playerEl.addEventListener('pointerdown', (ev)=>{
  ev.preventDefault();
  playerEl.setPointerCapture(ev.pointerId);
  state.dragging = true;
  dragOffset.x = ev.clientX;
  dragOffset.y = ev.clientY;
});
playerEl.addEventListener('pointermove', (ev)=>{
  if(!state.dragging) return;
  const dx = ev.clientX - dragOffset.x;
  const dy = ev.clientY - dragOffset.y;
  state.player.x += dx;
  state.player.y += dy;
  dragOffset.x = ev.clientX;
  dragOffset.y = ev.clientY;
  clampPlayer();
  centerOnPlayer();
  updateHUD();
});
playerEl.addEventListener('pointerup', (ev)=>{
  state.dragging = false;
  try{ playerEl.releasePointerCapture(ev.pointerId);}catch(e){}
});

/* HUD dynamique */
function updateHUD(){
  posEl.textContent = `x:${Math.round(state.player.x)} y:${Math.round(state.player.y)}`;
  let nearest = null, bestDist = Infinity;
  LOCATIONS.forEach(loc => {
    const d = Math.hypot(state.player.x - loc.x, state.player.y - loc.y);
    if (d < bestDist) { bestDist = d; nearest = loc; }
  });
  locLabelEl.textContent = (nearest && bestDist < DETECTION_RADIUS) ? nearest.label : "";
}

/* Boucle principale */
function loop(ts){
  if(!state.lastTs) state.lastTs = ts;
  const dt = (ts - state.lastTs) / 1000;
  state.lastTs = ts;
  let dx = 0, dy = 0;
  if(state.keys['arrowup'] || state.keys['w']) dy -= 1;
  if(state.keys['arrowdown'] || state.keys['s']) dy += 1;
  if(state.keys['arrowleft'] || state.keys['a']) dx -= 1;
  if(state.keys['arrowright'] || state.keys['d']) dx += 1;
  if(dx || dy){
    const len = Math.hypot(dx,dy) || 1;
    state.player.x += (dx/len) * PLAYER_SPEED * dt;
    state.player.y += (dy/len) * PLAYER_SPEED * dt;
    clampPlayer();
    centerOnPlayer();
    updateHUD();
  } else updateHUD();
  requestAnimationFrame(loop);
}

/* Initialisation */
function init(){
  loadMap(CURRENT_MAP_ID);
  // On centre le joueur au milieu de la carte
  state.player.x = state.mapObj.width / 2;
  state.player.y = state.mapObj.height / 2;

  // On attend que la map soit bien rendue avant de centrer
  requestAnimationFrame(() => {
    centerOnPlayer();
    updateHUD();
    requestAnimationFrame(loop);
  });
}

init();
</script>
</body>
</html>
